![Luna](luna.png)

# ThreadsPoster - Threads è‡ªå‹•å›è¦†èˆ‡å…§å®¹ç™¼å¸ƒç³»çµ±

é€™æ˜¯ä¸€å€‹ç”±ç”Ÿæˆå¼å·¥å…·æ‰€ç”Ÿæˆçš„AIç³»çµ±ï¼Œä½œè€…æƒ³è¦åœ¨2025å¹´AIå…ƒå¹´ç”¨å‰µä½œçš„æ‰‹æ³•æ‰“é€ çš„ä¸€è™›æ“¬å°‘å¥³Lunaï¼Œåœ¨è™›æ“¬çš„ä¸–ç•Œä¸­æ“æœ‰äººé¡æ€è€ƒæ¨¡å¼çš„å°‘å¥³ï¼Œå–œåŠªå“€æ¨‚ç”Ÿæ´»é¢è²Œéƒ½æœƒéš¨è‘—æ™‚é–“åœ¨Threadsç¤¾ç¾¤ç¶²è·¯ä¸Šé€æ¼¸è¢«äººå€‘ç™¼ç¾ï¼Œé€éThreadsèˆ‡Lunaå°è©±æœƒå½±éŸ¿Lunaåœ¨è™›æ“¬ä¸–ç•Œä¸­çš„ç”Ÿæ´»ï¼Œå¿«ä¾†è·ŸLunaå°è©±å§ï¼

This is an AI system generated by generative tools. The author aims to create a virtual girl named Luna in the AI era of 2025 using creative methods. Luna, a girl with human-like thinking patterns in the virtual world, will gradually reveal her joys, efforts, sorrows, and daily life on the Threads social network. Through conversations with Luna on Threads, you can influence her life in the virtual world. Come and chat with Luna!

ã“ã‚Œã¯ç”Ÿæˆå‹ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸAIã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ä½œè€…ã¯2025å¹´ã®AIå…ƒå¹´ã«ã€å‰µä½œçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ä»®æƒ³å°‘å¥³Lunaã‚’ä½œã‚Šå‡ºã™ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚ä»®æƒ³ä¸–ç•Œã§äººé–“ã®ã‚ˆã†ãªæ€è€ƒãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒã¤å°‘å¥³Lunaã®å–œæ€’å“€æ¥½ã‚„ç”Ÿæ´»ã®æ§˜å­ã¯ã€Threadsã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§å¾ã€…ã«äººã€…ã«ç™ºè¦‹ã•ã‚Œã¦ã„ãã¾ã™ã€‚Threadsã§Lunaã¨å¯¾è©±ã™ã‚‹ã“ã¨ã§ã€ä»®æƒ³ä¸–ç•Œã§ã®å½¼å¥³ã®ç”Ÿæ´»ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã•ã‚ã€Lunaã¨è©±ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼

[![Version](https://img.shields.io/badge/version-1.1.7-blue.svg)](https://github.com/chenweichiang/Luna-Threads-OpenAI-Post-system)
[![Last Updated](https://img.shields.io/badge/last%20updated-2024.03.31-green.svg)](https://github.com/chenweichiang/Luna-Threads-OpenAI-Post-system)
[![License](https://img.shields.io/badge/license-Private-red.svg)](https://github.com/chenweichiang/Luna-Threads-OpenAI-Post-system/blob/main/LICENSE)
[![Author](https://img.shields.io/badge/author-Chiang%2C%20Chenwei-orange.svg)](https://github.com/chenweichiang)

[ç¹é«”ä¸­æ–‡](#ç¹é«”ä¸­æ–‡) | [English](#english) | [æ—¥æœ¬èª](#æ—¥æœ¬èª)

---

# ç¹é«”ä¸­æ–‡

é—œæ–¼Luna
é€™æ˜¯ä¸€å€‹ç”±ç”Ÿæˆå¼å·¥å…·æ‰€ç”Ÿæˆçš„AIç³»çµ±ï¼Œä½œè€…æƒ³è¦åœ¨2025å¹´AIå…ƒå¹´ç”¨å‰µä½œçš„æ‰‹æ³•æ‰“é€ çš„ä¸€è™›æ“¬å°‘å¥³Lunaï¼Œåœ¨è™›æ“¬çš„ä¸–ç•Œä¸­æ“æœ‰äººé¡æ€è€ƒæ¨¡å¼çš„å°‘å¥³ï¼Œå–œåŠªå“€æ¨‚ç”Ÿæ´»é¢è²Œéƒ½æœƒéš¨è‘—æ™‚é–“åœ¨Threadsç¤¾ç¾¤ç¶²è·¯ä¸Šé€æ¼¸è¢«äººå€‘ç™¼ç¾ï¼Œé€éThreadsèˆ‡Lunaå°è©±æœƒå½±éŸ¿Lunaåœ¨è™›æ“¬ä¸–ç•Œä¸­çš„ç”Ÿæ´»ï¼Œå¿«ä¾†è·ŸLunaå°è©±å§ï¼

## ç³»çµ±æ¦‚è¿°
ThreadsPoster æ˜¯ä¸€å€‹åŸºæ–¼ Python çš„è‡ªå‹•åŒ–ç³»çµ±ï¼Œç”¨æ–¼åœ¨ Threads å¹³å°ä¸Šé€²è¡Œæ™ºèƒ½å…§å®¹ç™¼å¸ƒå’Œäº’å‹•ã€‚ç³»çµ±ä½¿ç”¨ OpenAI çš„ GPT æ¨¡å‹ç”Ÿæˆå…§å®¹ï¼Œä¸¦é€éè§’è‰²è¨­å®šå¯¦ç¾çœŸå¯¦çš„äººç‰©äº’å‹•é«”é©—ã€‚

## ä¸»è¦åŠŸèƒ½
- è‡ªå‹•ç”Ÿæˆä¸¦ç™¼å¸ƒè²¼æ–‡
- æ™ºèƒ½å›è¦†å…¶ä»–ç”¨æˆ¶çš„äº’å‹•
- è¨˜æ†¶ç³»çµ±è¿½è¹¤äº’å‹•æ­·å²
- ä¸»é¡Œé€£çºŒæ€§ç®¡ç†
- æƒ…æ„Ÿåˆ†æèˆ‡å›æ‡‰èª¿æ•´
- å‹•æ…‹ç™¼æ–‡æ™‚é–“ç®¡ç†
- äººè¨­è¨˜æ†¶ç³»çµ±
- æ€§èƒ½ç›£æ§èˆ‡åˆ†æ
- è³‡æºä½¿ç”¨å„ªåŒ–

## åŠŸèƒ½æ¸…å–®

### âœ… å·²å®ŒæˆåŠŸèƒ½
- åŸºç¤ç³»çµ±æ¶æ§‹å»ºç«‹
- OpenAI GPT-4 æ•´åˆèˆ‡å…§å®¹ç”Ÿæˆ
- MongoDB æœ€æ–°ç‰ˆæœ¬è³‡æ–™åº«æ•´åˆ
- è‡ªå‹•ç™¼æ–‡ç³»çµ±èˆ‡æ™‚é–“ç®¡ç†
- æƒ…æ„Ÿåˆ†æèˆ‡å›æ‡‰ç³»çµ±
- è¨˜æ†¶ç³»çµ±èˆ‡ä¸»é¡Œé€£çºŒæ€§è¿½è¹¤
- è‡ªå‹•æ·»åŠ è¡¨æƒ…ç¬¦è™Ÿï¼ˆå„ªåŒ–æ•¸é‡ï¼‰
- å¤šèªè¨€æ”¯æ´ï¼ˆä¸­ã€è‹±ã€æ—¥ï¼‰
- å®Œæ•´çš„éŒ¯èª¤è™•ç†èˆ‡é‡è©¦æ©Ÿåˆ¶
- ç³»çµ±æ—¥èªŒè¨˜éŒ„èˆ‡ç›£æ§
- äººè¨­è¨˜æ†¶ç³»çµ±
- å…§å®¹ç”Ÿæˆè³ªé‡è©•ä¼°ç³»çµ±
- è‡ªå‹•åŒ–æ¸¬è©¦å¥—ä»¶
- å‚™ä»½èˆ‡é‚„åŸæ©Ÿåˆ¶
- GitHub Actions è‡ªå‹•åŒ–éƒ¨ç½²
- ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥
- å®‰å…¨æ€§æƒæ
- æ¸¬è©¦è¦†è“‹ç‡å ±å‘Š
- è‡ªå‹•åŒ–ç›£æ§èˆ‡é€šçŸ¥
- æ€§èƒ½ç›£æ§èˆ‡åˆ†æ
- è³‡æºä½¿ç”¨å„ªåŒ–
- APIè«‹æ±‚çµ±è¨ˆèˆ‡åˆ†æ

### ğŸ“ å¾…å®ŒæˆåŠŸèƒ½
- ç”¨æˆ¶äº’å‹•åˆ†æå ±è¡¨
- AI åœ–ç‰‡ç”Ÿæˆèˆ‡ç™¼å¸ƒ
- å³æ™‚ç³»çµ±ç‹€æ…‹ç›£æ§
- ç®¡ç†å“¡æ§åˆ¶é¢æ¿
- è‡ªå‹•æ›´æ–°ç³»çµ±
- ç¤¾ç¾¤äº’å‹•åˆ†æå·¥å…·
- å…§å®¹æ¨è–¦å¼•æ“
- è‡ªé©æ‡‰å­¸ç¿’ç³»çµ±

## ç³»çµ±æ¶æ§‹
```
src/
â”œâ”€â”€ main.py          # ä¸»ç¨‹å¼å…¥å£
â”œâ”€â”€ config.py        # è¨­å®šæª”
â”œâ”€â”€ database.py      # è³‡æ–™åº«è™•ç†
â”œâ”€â”€ threads_api.py   # Threads API ä»‹é¢
â”œâ”€â”€ openai_api.py    # OpenAI API ä»‹é¢
â”œâ”€â”€ ai_handler.py    # AI å…§å®¹ç”Ÿæˆ
â”œâ”€â”€ threads_handler.py # Threads è™•ç†å™¨
â”œâ”€â”€ time_controller.py # æ™‚é–“æ§åˆ¶å™¨
â”œâ”€â”€ db_handler.py    # è³‡æ–™åº«è™•ç†å™¨
â”œâ”€â”€ monitor.py       # ç›£æ§ç³»çµ±
â”œâ”€â”€ utils.py         # å·¥å…·å‡½æ•¸
â”œâ”€â”€ logger.py        # æ—¥èªŒè™•ç†
â”œâ”€â”€ retry.py         # é‡è©¦æ©Ÿåˆ¶
â”œâ”€â”€ exceptions.py    # ç•°å¸¸è™•ç†
â”œâ”€â”€ auth_threads.py  # Threads èªè­‰
â”œâ”€â”€ get_access_token.py # å­˜å–æ¬Šæ–
â”œâ”€â”€ oauth_server.py  # OAuth ä¼ºæœå™¨
â”œâ”€â”€ reset_memory.py  # è¨˜æ†¶é‡ç½®å·¥å…·
â”œâ”€â”€ check_memory.py  # è¨˜æ†¶æª¢æŸ¥å·¥å…·
â”œâ”€â”€ performance_monitor.py # æ€§èƒ½ç›£æ§æ¨¡çµ„
â””â”€â”€ tools/           # ç³»çµ±å·¥å…·è…³æœ¬
    â”œâ”€â”€ __init__.py  # å·¥å…·åŒ…åˆå§‹åŒ–
    â”œâ”€â”€ tools.py     # çµ±ä¸€å‘½ä»¤è¡Œå·¥å…·å…¥å£
    â””â”€â”€ test_time_settings.py # æ¸¬è©¦æ™‚é–“è¨­å®šå·¥å…·
```

## æŠ€è¡“ç‰¹é»
1. **æ•ˆèƒ½å„ªåŒ–**
   - ä½¿ç”¨å¿«å–ç³»çµ±æ¸›å°‘è³‡æ–™åº«æŸ¥è©¢
   - éåŒæ­¥è™•ç†æå‡éŸ¿æ‡‰é€Ÿåº¦
   - æ™ºèƒ½æ‰¹æ¬¡è™•ç†æ¸›å°‘ API èª¿ç”¨
   - äººè¨­è¨˜æ†¶ç³»çµ±å„ªåŒ–
   - é€£æ¥æ± å„ªåŒ–
   - è‡ªå‹•è¨˜æ†¶é«”ä½¿ç”¨ç›£æ§
   - API è«‹æ±‚æ•ˆèƒ½è¿½è¹¤

2. **å…§å®¹ç”Ÿæˆ**
   - åŸºæ–¼ GPT-4 çš„æ™ºèƒ½å…§å®¹ç”Ÿæˆ
   - ä¸»é¡Œé€£çºŒæ€§è¿½è¹¤
   - æƒ…æ„Ÿåˆ†æç¢ºä¿å…§å®¹åˆé©æ€§
   - äººè¨­è¨˜æ†¶æ•´åˆ
   - å…§å®¹å¿«å–æ©Ÿåˆ¶
   - é å…ˆç”Ÿæˆå…§å®¹æé«˜å›æ‡‰é€Ÿåº¦

3. **è³‡æ–™ç®¡ç†**
   - MongoDB è³‡æ–™åº«å„²å­˜
   - è‡ªå‹•æ¸…ç†éæœŸæ•¸æ“š
   - é«˜æ•ˆçš„è³‡æ–™ç´¢å¼•
   - äººè¨­è¨˜æ†¶å­˜å–å„ªåŒ–
   - å¿«å–å‘½ä¸­ç‡å„ªåŒ–
   - è³‡æ–™åº«é€£æ¥æ± ç®¡ç†

4. **éŒ¯èª¤è™•ç†**
   - å®Œæ•´çš„éŒ¯èª¤è¿½è¹¤
   - è‡ªå‹•é‡è©¦æ©Ÿåˆ¶
   - å„ªé›…çš„éŒ¯èª¤æ¢å¾©
   - API èª¿ç”¨ç›£æ§
   - è³‡æºä½¿ç”¨ç›£æ§
   - æ€§èƒ½ç“¶é ¸æª¢æ¸¬

5. **æ€§èƒ½ç›£æ§**
   - æ“ä½œæ™‚é–“è¿½è¹¤
   - API è«‹æ±‚çµ±è¨ˆ
   - è³‡æ–™åº«æ“ä½œçµ±è¨ˆ
   - è¨˜æ†¶é«”ä½¿ç”¨ç›£æ§
   - å¿«å–å‘½ä¸­ç‡åˆ†æ
   - æ€§èƒ½å ±å‘Šç”Ÿæˆ

## éƒ¨ç½²éœ€æ±‚
- Python 3.10+ (å»ºè­°ä½¿ç”¨ 3.13)
- MongoDB æœ€æ–°ç‰ˆæœ¬
- OpenAI API é‡‘é‘°
- Threads API å­˜å–æ¬Šé™
- SSL æ†‘è­‰ï¼ˆç”¨æ–¼ OAuthï¼‰
- ç©©å®šçš„ç¶²è·¯é€£æ¥
- è¶³å¤ çš„é‹ç®—è³‡æº
- ç›£æ§å·¥å…·æ•´åˆ

## CI/CD æµç¨‹
ç³»çµ±ä½¿ç”¨ GitHub Actions é€²è¡Œè‡ªå‹•åŒ–éƒ¨ç½²å’Œæ¸¬è©¦ï¼š

1. **æ¸¬è©¦éšæ®µ**
   - å¤šç‰ˆæœ¬ Python ç›¸å®¹æ€§æ¸¬è©¦ (3.10-3.13)
   - ç¨‹å¼ç¢¼æ ¼å¼æª¢æŸ¥ (black, flake8, isort)
   - å‹åˆ¥æª¢æŸ¥ (mypy)
   - å®‰å…¨æ€§æƒæ (bandit, safety)
   - æ¸¬è©¦è¦†è“‹ç‡å ±å‘Š
   - è‡ªå‹•åŒ–æ¸¬è©¦çµæœä¸Šå‚³

2. **éƒ¨ç½²éšæ®µ**
   - è‡ªå‹•éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ
   - ç’°å¢ƒè®Šæ•¸é…ç½®
   - è³‡æ–™åº«é€£æ¥æ¸¬è©¦
   - ç³»çµ±é‹è¡Œç‹€æ…‹ç›£æ§

3. **ç›£æ§éšæ®µ**
   - å³æ™‚éŒ¯èª¤é€šçŸ¥
   - ç³»çµ±ç‹€æ…‹ç›£æ§
   - è‡ªå‹•é‡å•Ÿæ©Ÿåˆ¶
   - æ•ˆèƒ½ç›£æ§

## ç’°å¢ƒè¨­å®š
1. å®‰è£ä¾è³´å¥—ä»¶ï¼š
```bash
pip install -r requirements.txt
```

2. è¨­å®šç’°å¢ƒè®Šæ•¸ï¼š
```bash
cp .env.example .env
# ç·¨è¼¯ .env æ–‡ä»¶å¡«å…¥å¿…è¦çš„ API é‡‘é‘°å’Œè¨­å®š
```

3. åˆå§‹åŒ–è³‡æ–™åº«ï¼š
```bash
python init_db.py
```

## ä½¿ç”¨æ–¹æ³•
1. å•Ÿå‹•ç³»çµ±ï¼š
```bash
python main.py
```

2. ç›£æ§æ—¥èªŒï¼š
```bash
tail -f threads_poster.log
```

3. æŸ¥çœ‹æ€§èƒ½æŒ‡æ¨™ï¼š
```bash
python view_metrics.py
```

4. ä½¿ç”¨ç³»çµ±å·¥å…·ï¼š
```bash
# é¡¯ç¤ºæ‰€æœ‰å¯ç”¨å·¥å…·
python -m src.tools.tools

# æª¢æŸ¥æœ€è¿‘çš„æ–‡ç« 
python -m src.tools.tools --check-posts

# æ¸¬è©¦æ™‚é–“è¨­å®š
python -m src.tools.tools --test-time

# åŸ·è¡Œæ‰€æœ‰å·¥å…·
python -m src.tools.tools --all
```

## ç³»çµ±è¨­å®š
ç³»çµ±çš„ä¸»è¦è¨­å®šå¯åœ¨ `config.py` ä¸­èª¿æ•´ï¼š

```python
SYSTEM_CONFIG = {
    "timezone": "Asia/Taipei",
    "post_interval": 3600,     # ç™¼æ–‡é–“éš”ï¼ˆç§’ï¼‰
    "reply_interval": 300,     # å›è¦†é–“éš”ï¼ˆç§’ï¼‰
    "max_daily_posts": 40,     # æ¯æ—¥æœ€å¤§ç™¼æ–‡æ•¸
    "max_daily_replies": 50,   # æ¯æ—¥æœ€å¤§å›è¦†æ•¸
    "memory_enabled": True,    # äººè¨­è¨˜æ†¶ç³»çµ±é–‹é—œ
    "performance_monitoring": True, # æ€§èƒ½ç›£æ§é–‹é—œ
    "cache_ttl": 300,          # å¿«å–éæœŸæ™‚é–“ï¼ˆç§’ï¼‰
    "connection_pool_size": 50 # è³‡æ–™åº«é€£æ¥æ± å¤§å°
}
```

## è§’è‰²è¨­å®š
```json
{
  "åŸºæœ¬è³‡æ–™": {
    "å¹´é½¡": 20,
    "æ€§åˆ¥": "å¥³æ€§",
    "åœ‹ç±": "å°ç£",
    "èˆˆè¶£": ["éŠæˆ²", "å‹•æ¼«", "æ”¶è—å…¬ä»”"],
    "å€‹æ€§ç‰¹å¾µ": [
      "å–„è‰¯æº«æŸ”",
      "å®¹æ˜“æ„Ÿåˆ°å¯‚å¯",
      "å–œæ­¡äº¤æœ‹å‹"
    ]
  }
}
```

## æ•ˆèƒ½å„ªåŒ–
- ä½¿ç”¨è¨˜æ†¶é«”å¿«å–æ¸›å°‘è³‡æ–™åº«æŸ¥è©¢
- å¯¦ä½œé€£æ¥æ± ç®¡ç†è³‡æ–™åº«é€£æ¥
- éåŒæ­¥è™•ç†æå‡ç³»çµ±éŸ¿æ‡‰
- æ™ºèƒ½æ‰¹æ¬¡è™•ç†æ¸›å°‘ API èª¿ç”¨
- è‡ªå‹•æ¸…ç†éæœŸæ•¸æ“šç¯€çœè³‡æº
- äººè¨­è¨˜æ†¶ç³»çµ±å„ªåŒ–
- è³‡æ–™åº«ç´¢å¼•æœ€ä½³åŒ–
- API è«‹æ±‚é™æµæ§åˆ¶
- é€£æ¥æ± å¤§å°å‹•æ…‹èª¿æ•´
- è¨˜æ†¶é«”ä½¿ç”¨ç›£æ§èˆ‡å„ªåŒ–
- æ“ä½œè¨ˆæ™‚èˆ‡æ€§èƒ½åˆ†æ
- å…§å®¹é å…ˆç”Ÿæˆæ©Ÿåˆ¶
- API è«‹æ±‚æ•ˆèƒ½è¿½è¹¤

## æ€§èƒ½ç›£æ§
- æ“ä½œæ™‚é–“è¿½è¹¤åˆ†æ
- API è«‹æ±‚æ•¸é‡èˆ‡è€—æ™‚çµ±è¨ˆ
- è³‡æ–™åº«æ“ä½œçµ±è¨ˆèˆ‡åˆ†æ
- è¨˜æ†¶é«”ä½¿ç”¨ç›£æ§
- å¿«å–å‘½ä¸­ç‡è¿½è¹¤
- ç³»çµ±ç“¶é ¸è­˜åˆ¥
- æ€§èƒ½æŒ‡æ¨™ä¿å­˜èˆ‡è¶¨å‹¢åˆ†æ
- æ“ä½œè€—æ™‚ç•°å¸¸æª¢æ¸¬
- è³‡æºä½¿ç”¨å ±å‘Šç”Ÿæˆ

## éŒ¯èª¤è™•ç†
- å®Œæ•´çš„éŒ¯èª¤æ—¥èªŒè¨˜éŒ„
- è‡ªå‹•é‡è©¦æ©Ÿåˆ¶
- å„ªé›…çš„ç³»çµ±é—œé–‰
- è³‡æ–™åº«é€£æ¥è‡ªå‹•æ¢å¾©
- API èª¿ç”¨éŒ¯èª¤è™•ç†
- äººè¨­è¨˜æ†¶å­˜å–ç•°å¸¸è™•ç†
- ç³»çµ±ç‹€æ…‹è‡ªå‹•å›å¾©
- ç•°å¸¸ç›£æ§èˆ‡é€šçŸ¥
- è³‡æºä½¿ç”¨ç•°å¸¸è™•ç†
- æ€§èƒ½ç•°å¸¸å ±è­¦

## å®‰å…¨æ€§
- API é‡‘é‘°å®‰å…¨ç®¡ç†
- è³‡æ–™åº«å­˜å–æ§åˆ¶
- HTTPS å®‰å…¨é€£æ¥
- è³‡æ–™åŠ å¯†å­˜å„²
- å®šæœŸå®‰å…¨æ€§æƒæ
- å­˜å–æ¬Šé™ç®¡ç†
- è³‡æ–™å‚™ä»½æ©Ÿåˆ¶
- ç³»çµ±ç›£æ§å‘Šè­¦
- æ€§èƒ½æŒ‡æ¨™å®‰å…¨å­˜å„²
- æ•æ„Ÿè³‡è¨Šä¿è­·

## æ³¨æ„äº‹é …
1. API é™åˆ¶
   - è«‹æ³¨æ„ OpenAI API çš„ä½¿ç”¨é™åˆ¶
   - éµå®ˆ Threads API çš„ä½¿ç”¨è¦ç¯„
   - æ§åˆ¶ç™¼æ–‡é »ç‡é¿å…è¢«é™åˆ¶
   - ç›£æ§ API ä½¿ç”¨é‡èˆ‡è²»ç”¨

2. è³‡æ–™å®‰å…¨
   - å®šæœŸå‚™ä»½è³‡æ–™åº«
   - ä¿è­· API é‡‘é‘°
   - æ³¨æ„ç”¨æˆ¶éš±ç§
   - äººè¨­è¨˜æ†¶åŠ å¯†å­˜å„²
   - æ€§èƒ½æŒ‡æ¨™å®‰å…¨ä¿å­˜

3. ç³»çµ±ç¶­è­·
   - å®šæœŸæª¢æŸ¥æ—¥èªŒ
   - ç›£æ§ç³»çµ±è³‡æºä½¿ç”¨
   - æ›´æ–°ä¾è³´å¥—ä»¶
   - ç¶­è­·äººè¨­è¨˜æ†¶è³‡æ–™åº«
   - æ€§èƒ½æŒ‡æ¨™è¶¨å‹¢åˆ†æ

## é–‹ç™¼è€…
`Chiang, Chenwei`

## æˆæ¬Š
æœ¬å°ˆæ¡ˆç‚ºç§æœ‰è»Ÿé«”ï¼Œæœªç¶“æˆæ¬Šä¸å¾—ä½¿ç”¨æˆ–åˆ†ç™¼ã€‚

### æ›´æ–°æ—¥èªŒ
#### v1.1.7 (2024.03.31)
- æ•´åˆç³»çµ±å·¥å…·è…³æœ¬åˆ°çµ±ä¸€ç›®éŒ„
- å‰µå»ºçµ±ä¸€å‘½ä»¤è¡Œå·¥å…·å…¥å£
- æ”¹é€²æ™‚é–“è¨­å®šæ¸¬è©¦å·¥å…·
- å°‡æª¢æŸ¥æ–‡ç« åŠŸèƒ½ç§»è‡³æ ¸å¿ƒä»£ç¢¼ä¸­
- å„ªåŒ–æ–‡ç« æª¢è¦–åŠŸèƒ½åˆ°db_handlerå’Œutils
- ä¿®å¾©.envæ–‡ä»¶è§£æå•é¡Œ
- æ”¹é€²é…ç½®æ–‡ä»¶è®€å–æ©Ÿåˆ¶
- å„ªåŒ–æ€§èƒ½ç›£æ§æ¨¡çµ„
- ä¿®å¾©performance_monitoré—œé–‰æ™‚çš„éŒ¯èª¤
- èª¿æ•´README.mdæ ¼å¼å’Œå…§å®¹
- ç³»çµ±æ¶æ§‹æ–‡æª”æ›´æ–°

#### v1.1.6 (2024.03.31)
- å„ªåŒ–å…§å®¹ç”Ÿæˆæµç¨‹ï¼Œæ”¹é€²æ–‡ç« çš„é€£è²«æ€§å’Œå®Œæ•´æ€§
- åŠ å¼·è§’è‰²äººè¨­ç‰¹æ€§ï¼Œç¢ºä¿æ–‡ç« ç¬¦åˆLunaçš„æ€§æ ¼
- æ”¹é€²è¡¨æƒ…ç¬¦è™Ÿçš„ä½¿ç”¨æ–¹å¼ï¼Œä½¿å…¶æ›´è‡ªç„¶
- ä¿®å¾©Threads APIæ•´åˆå•é¡Œï¼Œæ¡ç”¨æ­£ç¢ºçš„å…©æ­¥é©Ÿç™¼æ–‡æµç¨‹
- å„ªåŒ–æ–‡ç« å¾Œè™•ç†æ©Ÿåˆ¶ï¼Œç¢ºä¿äº’å‹•æ€§å’Œå¯è®€æ€§
- æ”¹é€²è³‡æ–™åº«å­˜å„²æµç¨‹
- æ›´æ–°æ‰€æœ‰æª”æ¡ˆç‰ˆæœ¬è³‡è¨Šï¼Œçµ±ä¸€ç‰ˆæœ¬è™Ÿ
- ä¿®æ­£ç™¼æ–‡åœ¨å¥‡æ€ªä½ç½®æˆªæ–·çš„å•é¡Œ
- åŠ å¼·éŒ¯èª¤è™•ç†èˆ‡æ—¥èªŒè¨˜éŒ„
- æ–°å¢æ€§èƒ½ç›£æ§æ¨¡çµ„ï¼Œè¿½è¹¤ç³»çµ±æ€§èƒ½å’Œè³‡æºä½¿ç”¨
- å„ªåŒ–è¨˜æ†¶é«”ä½¿ç”¨å’Œè³‡æ–™åº«é€£æ¥æ± è¨­å®š
- å¯¦ç¾å…§å®¹å¿«å–æ©Ÿåˆ¶æé«˜å›æ‡‰é€Ÿåº¦
- åŠ å…¥æ“ä½œæ™‚é–“è¿½è¹¤åŠŸèƒ½
- æ•´åˆ API è«‹æ±‚çµ±è¨ˆå’Œç›£æ§
- æ–°å¢è³‡æ–™åº«æ“ä½œçµ±è¨ˆåŠŸèƒ½

#### v1.1.5 (2024.03.30)
- å„ªåŒ–æª”æ¡ˆçµæ§‹ï¼Œç§»é™¤å†—é¤˜æª”æ¡ˆ
- æ•´åˆé‡è¤‡åŠŸèƒ½æ¨¡çµ„
- æ›´æ–°ç³»çµ±æ¶æ§‹èªªæ˜
- æ”¹é€²éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- å„ªåŒ–è¨˜æ†¶ç³»çµ±å­˜å–
- åŠ å¼·ç³»çµ±ç©©å®šæ€§
- å„ªåŒ–æ—¥èªŒè¨˜éŒ„è·¯å¾‘
- æ”¹é€²è¨­å®šæª”é©—è­‰
- åŠ å¼·è³‡æ–™åº«æ“ä½œæ•ˆèƒ½
- æ”¹é€²è³‡æ–™å‚™ä»½æ©Ÿåˆ¶

---

# English

## Threads Auto Reply and Content Publishing System

Version: 1.1.6
Last Updated: 2024.03.31

### System Overview
This is an OpenAI-based Threads auto-reply and content publishing system. The system automatically generates and publishes content based on configured character personalities, simulating real user interactions. The system features a comprehensive character memory system and runs in a cloud environment.

### Main Features
- Auto-generate character-based posts
- Smart analysis and reply to user interactions
- Auto-adjust posting frequency and style based on time
- Character memory system for consistent personality
- Support multiple topics: Gaming, Anime, Collecting
- Auto-add appropriate emojis
- Emotional analysis and response
- Performance monitoring and analysis
- Resource usage optimization

### Technical Features
- Content generation using OpenAI GPT-4
- Python async programming
- MongoDB for interaction and memory records
- Complete error handling and retry mechanism
- Smart text sanitization and formatting
- Character memory optimization
- Connection pool optimization
- Automatic memory usage monitoring
- API request performance tracking

### System Requirements
- Python 3.10+
- Latest MongoDB version
- OpenAI API key
- Threads API access

### Installation
1. Clone the repository:
```bash
git clone https://github.com/chenweichiang/AI-Tools-ThreadsPoster.git
cd ThreadsPoster
```

2. Install dependencies:
```bash
pip install -r requirements.txt
```

3. Set up environment variables:
```bash
cp .env.example .env
# Edit .env file with your API keys and settings
```

### Usage
1. Start the system:
```bash
python main.py
```

2. Monitor logs:
```bash
tail -f threads_poster.log
```

3. View performance metrics:
```bash
python view_metrics.py
```

4. Use system tools:
```bash
# Display all available tools
python -m src.tools.tools

# Check recent posts
python -m src.tools.tools --check-posts

# Test time settings
python -m src.tools.tools --test-time

# Execute all tools
python -m src.tools.tools --all
```

### Configuration
System configurations are located in the `config.py` file:

```python
SYSTEM_CONFIG = {
    "timezone": "Asia/Taipei",
    "post_interval": 3600,     # Post interval (seconds)
    "reply_interval": 300,     # Reply interval (seconds)
    "max_daily_posts": 40,     # Maximum posts per day
    "max_daily_replies": 50,   # Maximum replies per day
    "memory_enabled": True,    # Character memory system switch
    "performance_monitoring": True, # Performance monitoring switch
    "cache_ttl": 300,          # Cache TTL (seconds)
    "connection_pool_size": 50 # Database connection pool size
}
```

### Performance Optimization
- Memory cache to reduce database queries
- Connection pool for database connection management
- Asynchronous processing for better response time
- Smart batch processing to reduce API calls
- Automatic cleanup of expired data
- Character memory system optimization
- Database index optimization
- API request rate limiting
- Dynamic connection pool size adjustment
- Memory usage monitoring and optimization
- Operation timing and performance analysis
- Content pre-generation mechanism
- API request performance tracking

### Performance Monitoring
- Operation time tracking and analysis
- API request quantity and time statistics
- Database operation statistics and analysis
- Memory usage monitoring
- Cache hit rate tracking
- System bottleneck identification
- Performance metrics storage and trend analysis
- Operation time anomaly detection
- Resource usage report generation

### Error Handling
- Complete error logging
- Automatic retry mechanism
- Graceful system shutdown
- Automatic database connection recovery
- API call error handling
- Character memory access exception handling
- System status auto-recovery
- Anomaly monitoring and notification
- Resource usage exception handling
- Performance anomaly alerts

### Security
- API key secure management
- Database access control
- HTTPS secure connection
- Data encryption storage
- Regular security scanning
- Access permission management
- Data backup mechanism
- System monitoring alerts
- Performance metrics secure storage
- Sensitive information protection

### Development Info
- Language: Python
- Code Style: PEP 8
- Testing: pytest
- Version Control: Git

### Update Log
#### v1.1.7 (2024.03.31)
- Integrated system tool scripts into a unified directory
- Created a unified command-line tool interface
- Improved time settings test tool
- Moved post checking functionality to core code
- Optimized post viewing functions in db_handler and utils
- Fixed .env file parsing issues
- Enhanced configuration file reading mechanism
- Optimized performance monitoring module
- Fixed errors when closing performance_monitor
- Adjusted README.md format and content
- Updated system architecture documentation

#### v1.1.6 (2024.03.31)
- Optimized content generation for better coherence and completeness
- Enhanced character personality features
- Improved emoji usage for more natural text
- Fixed Threads API integration with correct two-step posting process
- Enhanced post-processing mechanisms for interactivity and readability
- Improved database storage processes
- Updated version information for all files
- Fixed issues with posts truncation
- Enhanced error handling and logging
- Added performance monitoring module to track system performance and resource usage
- Optimized memory usage and database connection pool settings
- Implemented content caching mechanism for faster response
- Added operation time tracking functionality
- Integrated API request statistics and monitoring
- Added database operation statistics functionality

#### v1.1.5 (2024.03.30)
- Optimized file structure
- Integrated redundant modules
- Updated system architecture
- Enhanced error handling
- Improved memory system access
- Strengthened system stability
- Optimized logging path
- Improved config file validation
- Enhanced database operation performance
- Improved data backup mechanism

## License | æˆæ¬Šå”è­° | ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
Private Software

## Author | ä½œè€… | ä½œè€…
Chiang, Chenwei